{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Desktop/sociopedia/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Desktop/sociopedia/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPosts}from\"state\";import PostWidget from\"./PostWidget\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostsWidget=function PostsWidget(_ref){var userId=_ref.userId,_ref$isProfile=_ref.isProfile,isProfile=_ref$isProfile===void 0?false:_ref$isProfile;var dispatch=useDispatch();var posts=useSelector(function(state){return state.posts;});var token=useSelector(function(state){return state.token;});var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3001/posts\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;dispatch(setPosts({posts:data}));case 7:case\"end\":return _context.stop();}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();var getUserPosts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:3001/posts/\".concat(userId,\"/posts\"),{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;dispatch(setPosts({posts:data}));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function getUserPosts(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(isProfile){getUserPosts();}else{getPosts();}},[]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsx(_Fragment,{children:posts.map(function(_ref4){var _id=_ref4._id,userId=_ref4.userId,firstName=_ref4.firstName,lastName=_ref4.lastName,description=_ref4.description,location=_ref4.location,picturePath=_ref4.picturePath,userPicturePath=_ref4.userPicturePath,likes=_ref4.likes,comments=_ref4.comments;return/*#__PURE__*/_jsx(PostWidget,{postId:_id,postUserId:userId,name:\"\".concat(firstName,\" \").concat(lastName),description:description,location:location,picturePath:picturePath,userPicturePath:userPicturePath,likes:likes,comments:comments},_id);})});};export default PostsWidget;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","setPosts","PostWidget","PostsWidget","userId","isProfile","dispatch","posts","state","token","getPosts","fetch","method","headers","Authorization","response","json","data","getUserPosts","map","_id","firstName","lastName","description","location","picturePath","userPicturePath","likes","comments"],"sources":["C:/Users/Admin/Desktop/sociopedia/client/src/scenes/widgets/PostsWidget.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setPosts } from \"state\";\r\nimport PostWidget from \"./PostWidget\";\r\n\r\nconst PostsWidget = ({ userId, isProfile = false }) => {\r\n  const dispatch = useDispatch();\r\n  const posts = useSelector((state) => state.posts);\r\n  const token = useSelector((state) => state.token);\r\n\r\n  const getPosts = async () => {\r\n    const response = await fetch(\"http://localhost:3001/posts\", {\r\n      method: \"GET\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    const data = await response.json();\r\n    dispatch(setPosts({ posts: data }));\r\n  };\r\n\r\n  const getUserPosts = async () => {\r\n    const response = await fetch(\r\n      `http://localhost:3001/posts/${userId}/posts`,\r\n      {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    dispatch(setPosts({ posts: data }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isProfile) {\r\n      getUserPosts();\r\n    } else {\r\n      getPosts();\r\n    }\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <>\r\n      {posts.map(\r\n        ({\r\n          _id,\r\n          userId,\r\n          firstName,\r\n          lastName,\r\n          description,\r\n          location,\r\n          picturePath,\r\n          userPicturePath,\r\n          likes,\r\n          comments,\r\n        }) => (\r\n          <PostWidget\r\n            key={_id}\r\n            postId={_id}\r\n            postUserId={userId}\r\n            name={`${firstName} ${lastName}`}\r\n            description={description}\r\n            location={location}\r\n            picturePath={picturePath}\r\n            userPicturePath={userPicturePath}\r\n            likes={likes}\r\n            comments={comments}\r\n          />\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostsWidget;\r\n"],"mappings":"4QAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAOC,WAAU,KAAM,cAAc,CAAC,gGAEtC,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAAsC,IAAhCC,OAAM,MAANA,MAAM,qBAAEC,SAAS,CAATA,SAAS,yBAAG,KAAK,gBAC9C,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,GAAMQ,MAAK,CAAGP,WAAW,CAAC,SAACQ,KAAK,QAAKA,MAAK,CAACD,KAAK,GAAC,CACjD,GAAME,MAAK,CAAGT,WAAW,CAAC,SAACQ,KAAK,QAAKA,MAAK,CAACC,KAAK,GAAC,CAEjD,GAAMC,SAAQ,6FAAG,4KACQC,MAAK,CAAC,6BAA6B,CAAE,CAC1DC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAEC,aAAa,kBAAYL,KAAK,CAAG,CAC9C,CAAC,CAAC,QAHIM,QAAQ,qCAIKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACVX,QAAQ,CAACL,QAAQ,CAAC,CAAEM,KAAK,CAAEU,IAAK,CAAC,CAAC,CAAC,CAAC,qDACrC,kBAPKP,SAAQ,2CAOb,CAED,GAAMQ,aAAY,6FAAG,kLACIP,MAAK,uCACKP,MAAM,WACrC,CACEQ,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAEC,aAAa,kBAAYL,KAAK,CAAG,CAC9C,CAAC,CACF,QANKM,QAAQ,uCAOKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,gBACVX,QAAQ,CAACL,QAAQ,CAAC,CAAEM,KAAK,CAAEU,IAAK,CAAC,CAAC,CAAC,CAAC,uDACrC,kBAVKC,aAAY,2CAUjB,CAEDpB,SAAS,CAAC,UAAM,CACd,GAAIO,SAAS,CAAE,CACba,YAAY,EAAE,CAChB,CAAC,IAAM,CACLR,QAAQ,EAAE,CACZ,CACF,CAAC,CAAE,EAAE,CAAC,CAAE;AAER,mBACE,yBACGH,KAAK,CAACY,GAAG,CACR,mBACEC,IAAG,OAAHA,GAAG,CACHhB,MAAM,OAANA,MAAM,CACNiB,SAAS,OAATA,SAAS,CACTC,QAAQ,OAARA,QAAQ,CACRC,WAAW,OAAXA,WAAW,CACXC,QAAQ,OAARA,QAAQ,CACRC,WAAW,OAAXA,WAAW,CACXC,eAAe,OAAfA,eAAe,CACfC,KAAK,OAALA,KAAK,CACLC,QAAQ,OAARA,QAAQ,oBAER,KAAC,UAAU,EAET,MAAM,CAAER,GAAI,CACZ,UAAU,CAAEhB,MAAO,CACnB,IAAI,WAAKiB,SAAS,aAAIC,QAAQ,CAAG,CACjC,WAAW,CAAEC,WAAY,CACzB,QAAQ,CAAEC,QAAS,CACnB,WAAW,CAAEC,WAAY,CACzB,eAAe,CAAEC,eAAgB,CACjC,KAAK,CAAEC,KAAM,CACb,QAAQ,CAAEC,QAAS,EATdR,GAAG,CAUR,EACH,CACF,EACA,CAEP,CAAC,CAED,cAAejB,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}